# Домашнее задание к занятию «Базы данных, их типы»


---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
### 1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

### Ответ:
Тип СУБД: Реляционная СУБД (например, PostgreSQL, Microsoft SQL Server, Oracle)

Обоснование:

Требуется целостность данных → поддержка ACID;

Нужна строгая схема (таблицы, связи, типы);

Возможность анализа и построения отчётов с помощью SQL и BI-инструментов.

### 1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 
### Ответ:
Использовать библиотеки для ускоренного хеширования, например:

bcrypt / argon2 — для безопасного хеширования паролей;

xxHash, Blake3 — для быстрого хеширования больших объемов данных.

Для API — использовать gRPC или FastAPI (Python) для высокопроизводительного взаимодействия между сервисами.

### 1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
### маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
### СУБД должны быть гибкими и быстрыми.
### Ответ:
Типы СУБД:

Для лендингов: NoSQL (например, MongoDB, Firebase) — за счёт гибкости и скорости.

Для CRM: SQL (например, MySQL, PostgreSQL) — так как нужна структура, фильтрация, аналитика.

### 1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
### Ответ:Да, можно использовать PostgreSQL:

Поддерживает JSONB → возможность хранения неструктурированных данных (для лендингов).

Поддерживает реляционные таблицы для CRM.


### 1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
### и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
### Ответ:
Тип СУБД: Реляционная СУБД (например, MySQL/PostgreSQL) — для простой структуры, вложенности, поиска.

### 1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?
### Ответ:
Да, можно использовать ту же PostgreSQL, что и для CRM:

Создать отдельную схему или базу;

Реализовать иерархию документов и материалов через табличные связи или JSONB;

Обеспечить разграничение доступа для пользователей.

### 1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
### по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
### со связями.
### Ответ:
Тип СУБД: Графовая СУБД (например, Neo4j)

Обоснование:

Задача построения маршрутов и связей → графовая модель лучше справляется с такими задачами (короткие пути, связи, оптимизация).


### 1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
### логистов?
### Ответ: рекомендуется связка:

Использовать отдельную реляционную СУБД для закупок (финансовые данные, отчётность);

Интеграция с логистической графовой СУБД через API или ETL (синхронизация данных).
### 1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

### Ответ:
Теоретически — да, при выборе PostgreSQL:

Поддерживает реляционные таблицы, JSONB (полуструктурированные данные);

Интеграция с внешними сервисами (например, аналитика, машинное обучение);

Расширения, например, pgRouting — для логистики (альтернатива Neo4j);

Многоуровневая архитектура и безопасность.

Но на практике лучше использовать гибридную архитектуру: каждая задача на оптимальном инструменте.

---

### Задание 2. Транзакции

### 2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
### транзакция завершилась успешно. Ориентируйтесь на шесть действий.
### Ответ:
1.Пользователь инициирует платёж через сайт или мобильное приложение.

2.Создаётся транзакция в базе данных со статусом «Ожидание».

3.Платёжный шлюз проверяет и подтверждает платёж (например, через эквайринг).

4.СУБД обновляет баланс телефона, переводит транзакцию в статус «Успешно».

5.Запись в лог/аудит: сохраняется информация о времени, платеже, пользователе.

6.Отправляется уведомление пользователю о пополнении баланса (SMS, e-mail, push).

Все шаги должны быть обернуты в транзакцию БД, чтобы при сбое операции всё откатилось.

### 2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*
### Ответ:
1.Система проверяет дату и порог баланса.

2.Создаёт задачу на автосписание с привязанной картой.

3.Инициализация платежа через платёжный API.

4.Проверка и подтверждение оплаты.

5.Обновление баланса и статус автоплатежа.

6.Отправка уведомлений + запись в историю.

---

### Задание 3. SQL vs NoSQL

### 3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

### Ответ:
1.Масштабируемость как у NoSQL, но с гарантией ACID, как у SQL;

2.Горизонтальное масштабирование без потери консистентности (например, Google Spanner, CockroachDB);

3.Автоматическое восстановление, шардирование, высокая доступность;

4.Подходит для нагруженных и критичных систем (финтех, телеком, госсервисы).

### 3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

### Ответ:
Масштабируемость как у NoSQL, но с гарантией ACID, как у SQL;

Горизонтальное масштабирование без потери консистентности (например, Google Spanner, CockroachDB);

Автоматическое восстановление, шардирование, высокая доступность;

Подходит для нагруженных и критичных систем (финтех, телеком, госсервисы)

---

### Задание 4. Кластеры

### Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
### выделено 1000 машин. 

### На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
### здесь справится лучше всего и почему?

### *Приведите ответ в свободной форме.*

### Ответ:
Критерии выбора:

Объём данных — несколько терабайт или петабайт?

Тип обработки — пакетная или потоковая?

Задачи — аналитика, прогнозы, ML?

Рекомендации:

Для анализа большого объёма данных → колоночные СУБД, например:

ClickHouse, Apache Druid, Amazon Redshift — для аналитики.

Распределённые фреймворки:

Apache Spark — модель распределённой обработки данных (в памяти и на диске);

Hadoop (HDFS + MapReduce) — если важна обработка файлов и устойчивость;

Presto/Trino — SQL-движок для объединения данных из разных источников.

Почему Apache Spark:

Высокая скорость;

Работа в кластере (управляет ресурсами);

Поддержка SQL, MLlib, GraphX;

Интеграция с различными СУБД и хранилищами.

---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
